'use strict';(function(E){function l(a){const b={},c={};for(const d in a){const f=a[d];Array.isArray(f)?(b[d]=f[m.m],c[d]=f[m.j]):(b[d]=f,c[d]=f)}return[b,c]}function t(a,b){var c=b.sente?m.m:m.j;b=g("svg",n.root[c]);const d=g("polygon",n.a[c]),f=g("polygon",n.A[c]);c=g("text",n.B[c]);c.textContent=a;b.appendChild(d);b.appendChild(f);b.appendChild(c);return b}function h(a,b){return a.querySelector(`[data-suji="${b.suji}"][data-dan="${b.dan}"]`)}function u(a){a.classList.add(e.b)}function v(a){a.classList.remove(e.b)}
function w(a){return a.classList.contains(e.b)}function p(a,b){return k(h(a,b))}function k(a){return a.querySelector("."+e.a)||null}function x(a){a.classList.add(e.c)}function y(a){a.classList.remove(e.c)}function z(a){return a.classList.contains(e.c)}function A(a,b){a=h(a,b);(b=k(a))&&a.removeChild(b)}function B(a){return a.textContent.trim()}function q(a){return(a=k(a))&&B(a)}function g(a,b={}){a=F.has(a)?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);for(const c in b)a.setAttribute(c,
b[c]);return a}const e={o:"shogi__board",F:"shogi__suji_text_row",D:"shogi__suji_text",i:"shogi__dan_text",v:"shogi__dan_row",s:"shogi__board__dot",u:"shogi__cell",b:"shogi__cell--highlighted",a:"shogi__koma",c:"shogi__koma--selected",C:"shogi__mochigomas",l:"shogi__mochigomas--gote",f:"shogi__mochigoma",h:"shogi__mochigoma__koma",g:"shogi__mochigoma__count"},m={m:0,j:1},n={root:l({"class":e.a,viewBox:"0 0 250 250"}),a:l({points:["125,0 195,30 235,238 15,238 55,30","125,238 195,208 235,0 15,0 55,208"],
fill:"rgb(221,190,138)"}),A:l({points:["15,238 235,238 232,250 18,250","125,238 195,208 192,220 125,250 58,220 55,208"],fill:"rgb(133,111,83)"}),B:l({"text-anchor":"middle","dominant-baseline":"middle","font-size":"120px",x:"125",y:["145","93"],transform:["","rotate(180,125,93)"]})},F=new Set(["svg","polygon","text"]),G="\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341".split("");E.Shogi={komaTypes:"\u738b\u7389\u98db\u9f8d\u89d2\u99ac\u91d1\u9280\u5168\u6842\u572d\u9999\u674f\u6b69\u3068".split(""),
komaSVG:t,boardDiv:function(){const a=g("div",{"class":e.o});var b=g("div",{"class":e.F});for(var c=9;1<=c;c--){var d=g("div",{"class":e.D});d.textContent=c;b.appendChild(d)}b.appendChild(g("div",{"class":e.i}));a.appendChild(b);for(b=1;9>=b;b++){c=g("div",{"class":e.v});for(d=9;1<=d;d--){if(!(3!=d&&6!=d||3!=b&&6!=b)){var f=g("div",{"class":e.s});c.appendChild(f)}f=g("div",{"class":e.u});f.dataset.suji=d;f.dataset.dan=b;c.appendChild(f)}d=g("div",{"class":e.i});f=g("span");f.textContent=G[b-1];d.appendChild(f);
c.appendChild(d);a.appendChild(c)}return a},mochigomasDiv:function(){const a=g("div",{"class":e.C});for(let b=0;7>b;b++){const c=g("div",{"class":e.f});c.appendChild(g("div",{"class":e.h}));c.appendChild(g("div",{"class":e.g}));a.appendChild(c)}return a},cellAt:h,cellPosition:function(a){return{suji:parseInt(a.dataset.suji,10),dan:parseInt(a.dataset.dan,10)}},highlightCell:u,unhighlightCell:v,highlightCellAt:function(a,b){u(h(a,b))},unhighlightCellAt:function(a,b){v(h(a,b))},cellHighlighted:w,cellHighlightedAt:function(a,
b){return w(h(a,b))},komaAt:p,komaIn:k,selectKoma:x,unselectKoma:y,komaSelected:z,selectKomaAt:function(a,b){(a=p(a,b))&&x(a)},unselectKomaAt:function(a,b){(a=p(a,b))&&y(a)},komaSelectedAt:function(a,b){return(a=p(a,b))&&z(a)},putKomaAt:function(a,b,c){A(a,c);h(a,c).appendChild(b)},removeKomaAt:A,komaType:B,komaTypeAt:function(a,b){return q(h(a,b))},komaTypeIn:q,setMochigomas:function(a,b,c){c.sente?a.classList.remove(e.l):a.classList.add(e.l);a=a.querySelectorAll("."+e.f);for(let f=0;7>f;f++){var d=
a[f];const r=d.querySelector("."+e.h);d=d.querySelector("."+e.g);const C=k(r);C&&r.removeChild(C);d.textContent="";const {type:D,count:H}=b[f]||{};D&&(r.appendChild(t(D,c)),d.textContent=H)}},getMochigomas:function(a){a=a.querySelectorAll("."+e.f);const b=[];for(let f=0;7>f;f++){var c=a[f],d=c.querySelector("."+e.g);c=q(c.querySelector("."+e.h));d=parseInt(d.textContent,10);c&&(b[f]={type:c,count:d})}return b}}})("object"==typeof globalThis?globalThis:window);
